<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>SPORTFOLIO</title>
<!--    <meta name="_csrf" th:content="${_csrf.token}"/>-->
<!--    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>-->
</head>
<body>

<div th:fragment="header">
    <header class="headerWrap">
        <div class="headerInner">
            <h1 class="logo"><a href="/"><img th:src="@{/images/logo.png}" alt="SPORTFOLIO"></a></h1>
            <div class="headerBtn">
                <!-- 로그인/로그아웃 상태에 따른 버튼 표시 -->
                <!--<th:block sec:authorize="isAnonymous()">
                    <a href="/login" class="loginBtn">로그인</a>
                </th:block>-->
                <div class="headerLogin">
                <th:block sec:authorize="isAuthenticated()">
                    <p class="welcome"><span sec:authentication="principal.username"></span>님 환영합니다</p>
                    <form th:action="@{/logout}" method="post" style="display: inline;">
                        <button type="submit" class="logoutBtn">로그아웃</button>
                    </form>
                </th:block>
                </div>

                <form class="searchWrap" action="/search" method="get">
                    <input type="text" placeholder="검색어를 입력해주세요." id="headerSearchInput" name="keyword">
                    <input type="hidden" name="category" value="ALL">
                    <button type="submit" class="icon">
                        <img th:src="@{/images/search.png}" alt="검색">
                    </button>
                </form>
                

                
                <a href="#" class="menuBtn">메뉴</a>
            </div>
        </div>
    </header>
    <div class="navWrap">
        <ul class="nav">
            <li><a href="#">ABOUT</a></li>
            <li><a href="#">ARCHIVING</a></li>
            <li><a href="/project">PROJECTS</a></li>
            <li><a href="/inquiry">INQUIRY</a></li>
        </ul>
    </div>

    <script th:inline="javascript">
    // 폼 제출 시 항상 검색 페이지로 이동
    document.querySelector('.headerBtn .searchWrap').addEventListener('submit', function(e) {
        // 빈 검색어 체크 제거
        // 폼이 그대로 제출되어 검색 페이지로 이동
    });
    </script>
</div>
</body>
</html>